#!/bin/bash

#set -x

MYDIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
PARENTDIR="$(dirname "$dir")"

source "$PARENTDIR"/timesync-scripts/help_error-handler
source "$PARENTDIR"/timesync-scripts/help_cli
source "$PARENTDIR"/timesync-scripts/help_phrase-cmd-options
source "$PARENTDIR"/whonixcheck-scripts/help_output
source "$PARENTDIR"/whonixcheck-scripts/10_preparation
source "$PARENTDIR"/timesync-scripts/15_kill-old-instances
source "$PARENTDIR"/timesync-scripts/20_welcome
source "$PARENTDIR"/timesync-scripts/25_disclaimer
source "$PARENTDIR"/timesync-scripts/30_run-htpdate
source "$PARENTDIR"/whonixcheck-scripts/70_check-htpdate

timesync_main() {
   trap "error_handler" ERR INT TERM
  
   phrase_cmd_options $1 ## help_phrase-cmd-options 
   preparation ## 10_preparation
   kill_old_instances ## 15_kill-old-instances
   welcome ## 20_welcome
   disclaimer ## 25_disclaimer

   run_htpdate # 30_run-htpdate

   progress_bar 100 ## whonixcheck-scripts/help_output
   show_output ## whonixcheck-scripts/help_output
   exit 0
}

timesync_main $1

## End of timesync script.
