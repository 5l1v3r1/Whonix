#!/bin/bash

set -x

error_handler() {
   echo "
#############################################################
## postinst script: ERROR detected. Please report this bug! #
#############################################################
"

   exit 1
} 

trap "error_handler" ERR

own_filename="$(basename $0)"
case $skip_scripts in
   *$own_filename*) true "INFO: Skipping $own_filename, because skip_scripts includes it."
                    exit 0
                    ;;
esac

## || true to support re-running the script

true "Linking uwt wrappers to /usr/bin/uwtwrapper master script."

## TODO FIX: add dpkg-divert

ln -s /usr/bin/uwtwrapper /usr/bin/apt-get || true
ln -s /usr/bin/uwtwrapper /usr/bin/curl || true
ln -s /usr/bin/uwtwrapper /usr/bin/git || true
ln -s /usr/bin/uwtwrapper /usr/bin/gpg || true
ln -s /usr/bin/uwtwrapper /usr/bin/mixmaster-update || true
ln -s /usr/bin/uwtwrapper /usr/bin/rawdog || true
ln -s /usr/bin/uwtwrapper /usr/bin/ssh || true
ln -s /usr/bin/uwtwrapper /usr/bin/wget || true

