#!/usr/bin/make -f

#export DH_VERBOSE=1

clean:
	dh_testdir
	dh_testroot
	dh_clean

build-arch: build

build-indep: build
	
build: 

binary: binary-indep

binary-arch:

binary-indep: build install
	dh_testdir
	dh_testroot
	dh_installchangelogs
	dh_installdocs
	dh_gencontrol
	dh_compress
	dh_fixperms
	dh_installdeb
	dh_md5sums
	dh_builddeb
	
install: build
	dh_testdir
	dh_testroot
	dh_prep
	dh_installdirs

	mkdir -p $(CURDIR)/debian/tmp/whonix_shared
	cp -r $(CURDIR)/whonix_shared/ $(CURDIR)/debian/tmp
	
	mkdir -p $(CURDIR)/debian/tmp/whonix_gateway
	cp -r $(CURDIR)/whonix_gateway/ $(CURDIR)/debian/tmp
	
	mkdir -p $(CURDIR)/debian/tmp/whonix_workstation
	cp -r $(CURDIR)/whonix_workstation/ $(CURDIR)/debian/tmp

	if [ ! -f $(CURDIR)/debian/copyright ]; then \
		cp $(CURDIR)/LICENSE $(CURDIR)/debian/copyright; \
	fi
	
	dh_install --list-missing --sourcedir=$(CURDIR)/debian/tmp
	
.PHONY: build clean binary install
